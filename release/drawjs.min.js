
// @thesabbir/drawjs 0.0.3
// MIT
// https://github.com/thesabbir/drawjs

var g="rect",h="circle",x="g",a="http://www.w3.org/2000/svg";var u=()=>([1e4]+-1e4+-1e4).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),o=e=>{let t=[];for(let r=0,i=Object.keys(e);r<i.length;r++)t.push(e[i[r]]);return t},c=e=>e.map(t=>t.toObject());var _=class{constructor(t="new layer"){this._name=t,this._type=x,this._uuid=u(),this._children={},this._activeChildren=null,this._active=!1,this._attributes={}}set name(t){this._name=t}get name(){return this._name}set active(t){this._active=t}get active(){return this._active}get attributes(){return this._attributes}set attributes(t){this._attributes={...this._attributes,...t}}get uuid(){return this._uuid}addChildren(t){this._children[t.uuid]=t,this.activeChildren=t}set activeChildren(t){this._activeChildren=t.uuid}get activeChildren(){return this._children[this._activeChildren]}get children(){return o(this._children)}toObject(){return{type:this._type,uuid:this._uuid,name:this._name,children:c(this.children)}}};function d(e){return document.createElementNS(a,e)}function p(e={}){let t=document.createElementNS(a,"svg");return t.setAttribute("xmlns",a),l(t,e),t}var E=e=>{switch(e.type){case h:let{x:t,y:r}=e.attributes;return{id:e.uuid,cx:t,cy:r,...e.attributes};default:return{id:e.uuid,...e.attributes}}},l=(e,t)=>{for(let r=0,i=Object.keys(t);r<i.length;r++){let s=t[i[r]];e.setAttributeNS(null,i[r],s)}return e},C=e=>{let t=new DocumentFragment;for(let r=0;r<e.length;r++){let i=e[r],s=E(i);t.appendChild(l(d(i.type),s))}return t},S=e=>l(d(e.type),{...e.attributes,id:e.uuid}),T=e=>{let t=new DocumentFragment;for(let r=0;r<e.length;r++){let i=e[r],s=S(i);s.appendChild(C(i.children)),t.appendChild(s)}return t},V=e=>{let t=p({id:e.uuid});return t.appendChild(T(e.layers)),t},w=e=>V(e);var m=class{constructor(t="Untitled.svg"){this._name=t,this._state={},this._layers={},this._activeLayer=null,this._uuid=u(),this.setup()}get state(){return this._state}set state(t){this._state=t}get name(){return this._name}set name(t){this._name=t}get uuid(){return this._uuid}get layers(){return o(this._layers)}get activeLayer(){return this._layers[this._activeLayer]}set activeLayer(t){this._activeLayer=t.uuid}addLayer(t=new _){this._layers[t.uuid]=t,this.activeLayer=t}draw(t,r){this.activeLayer.addChildren(t),t.onViewUpdate(()=>{r(this.toSVG())})}toObject(){return{name:this.name,uuid:this.uuid,layers:c(this.layers)}}toSVG(){let t=w(this.toObject());return t.setAttribute("style","height:100%;width:100%"),t}setup(){this.addLayer(new _("layer 1"))}};var A=class{constructor(t){this._rootElm=t,this._files={},this._activeFile={}}get files(){return o(this._files)}newFile(t){let r=new m(t);return this._files[r.uuid]=r,this._activeFile=r.uuid,r}get activeFile(){return this._files[this._activeFile]}set activeFile(t){return this._files[t.uuid]}draw(t){this.activeFile.draw(t,this._renderDom.bind(this)),this._renderDom()}_renderDom(t=this.activeFile.toSVG()){if(!this._rootElm)return new Error("Root element not found");this._rootElm.replaceChildren(t)}setup(){this.newFile(),this._renderDom()}};var b=class{constructor(t,r){this._attributes={x:t,y:r}}set x(t){this._attributes.x=t}set y(t){this._attributes.y=t}get x(){return this._attributes.x}get y(){return this._attributes.y}};var n=class extends b{constructor(t=0,r=0){super(t,r);return this._uuid=u(),this._attributes=this.attributes||{},new Proxy(this,{set:(i,s,v)=>(i[s]=v,i._updateView&&i._updateView(i),!0)})}get attributes(){return this._attributes}set attributes(t){this._attributes={...this._attributes,...t}}set fill(t){this._attributes.fill=t}set stroke(t){this._attributes.stroke=t}set strokeWidth(t){this._attributes.strokeWidth=t}set transform(t){this._attributes.transform=t}get uuid(){return this._uuid}onViewUpdate(t){this._updateView=t}};var y=class extends n{constructor(t,r,i,s){super(t,r);this._type=g,this._attributes=this._attributes||{},this._attributes.height=i,this._attributes.width=s}set height(t){this._attributes.height=t}set width(t){this._attributes.width=t}get height(){return this._attributes.height}get width(){return this._attributes.width}toObject(){return{type:this._type,uuid:this.uuid,attributes:this.attributes}}clone(){return new y(this._attributes.x,this._attributes.y,this._attributes.height,this._attributes.width)}};var f=class extends n{constructor(t,r,i){super(t,r);this._type=h,this._attributes=this._attributes||{},this._attributes.r=i}set r(t){this._attributes.r=t}get r(){return this._attributes.r}toObject(){return{type:this._type,uuid:this.uuid,attributes:this.attributes}}clone(){return new f(this._attributes.x,this._attributes.y,this._attributes.r)}};export{f as Circle,A as Draw,y as Rectangle};
//# sourceMappingURL=drawjs.min.js.map
