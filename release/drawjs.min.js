
// @thesabbir/drawjs 0.0.2
// MIT
// https://github.com/thesabbir/drawjs

var g="rect",y="g",u="http://www.w3.org/2000/svg";var o=()=>([1e4]+-1e4+-1e4).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)),n=e=>{let t=[];for(let i=0,r=Object.keys(e);i<r.length;i++)t.push(e[r[i]]);return t},a=e=>e.map(t=>t.toObject());var h=class{constructor(t="new layer"){this._name=t,this._type=y,this._uuid=o(),this._children={},this._activeChildren=null,this._active=!1,this._attributes={}}set name(t){this._name=t}get name(){return this._name}set active(t){this._active=t}get active(){return this._active}get attributes(){return this._attributes}set attributes(t){this._attributes={...this._attributes,...t}}get uuid(){return this._uuid}addChildren(t){this._children[t.uuid]=t,this.activeChildren=t}set activeChildren(t){this._activeChildren=t.uuid}get activeChildren(){return this._children[this._activeChildren]}get children(){return n(this._children)}toObject(){return{type:this._type,uuid:this._uuid,name:this._name,children:a(this.children)}}};function c(e){return document.createElementNS(u,e)}function l(e={}){let t=document.createElementNS(u,"svg");return t.setAttribute("xmlns",u),d(t,e),t}var d=(e,t)=>{for(let i=0,r=Object.keys(t);i<r.length;i++){let s=t[r[i]];e.setAttributeNS(null,r[i],s)}return e},x=e=>{let t=new DocumentFragment;for(let i=0;i<e.length;i++){let r=e[i];t.appendChild(d(c(r.type),{...r.attributes,id:r.uuid}))}return t},v=e=>d(c(e.type),{...e.attributes,id:e.uuid}),E=e=>{let t=new DocumentFragment;for(let i=0;i<e.length;i++){let r=e[i],s=v(r);s.appendChild(x(r.children)),t.appendChild(s)}return t},S=e=>{let t=l({id:e.uuid});return t.appendChild(E(e.layers)),t},f=e=>S(e);var _=class{constructor(t="Untitled.svg"){this._name=t,this._state={},this._layers={},this._activeLayer=null,this._uuid=o(),this.setup()}get state(){return this._state}set state(t){this._state=t}get name(){return this._name}set name(t){this._name=t}get uuid(){return this._uuid}get layers(){return n(this._layers)}get activeLayer(){return this._layers[this._activeLayer]}set activeLayer(t){this._activeLayer=t.uuid}addLayer(t=new h){this._layers[t.uuid]=t,this.activeLayer=t}draw(t,i){this.activeLayer.addChildren(t),t.onViewUpdate(()=>{i(this.toSVG())})}toObject(){return{name:this.name,uuid:this.uuid,layers:a(this.layers)}}toSVG(){let t=f(this.toObject());return t.setAttribute("style","height:100%;width:100%"),t}setup(){this.addLayer(new h("layer 1"))}};var V=class{constructor(t){this._rootElm=t,this._files={},this._activeFile={}}get files(){return n(this._files)}newFile(t){let i=new _(t);return this._files[i.uuid]=i,this._activeFile=i.uuid,i}get activeFile(){return this._files[this._activeFile]}set activeFile(t){return this._files[t.uuid]}draw(t){this.activeFile.draw(t,this._renderDom.bind(this)),this._renderDom()}_renderDom(t=this.activeFile.toSVG()){if(!this._rootElm)return new Error("Root element not found");this._rootElm.replaceChildren(t)}setup(){this.newFile(),this._renderDom()}};var p=class{constructor(t,i){this._attributes={x:t,y:i}}set x(t){this._attributes.x=t}set y(t){this._attributes.y=t}get x(){return this._attributes.x}get y(){return this._attributes.y}};var m=class extends p{constructor(t=0,i=0){super(t,i);return this._uuid=o(),this._attributes=this.attributes||{},new Proxy(this,{set:(r,s,w)=>(r[s]=w,r._updateView&&r._updateView(r),!0)})}get attributes(){return this._attributes}set attributes(t){this._attributes={...this._attributes,...t}}set fill(t){this._attributes.fill=t}set stroke(t){this._attributes.stroke=t}set strokeWidth(t){this._attributes.strokeWidth=t}set transform(t){this._attributes.transform=t}get uuid(){return this._uuid}onViewUpdate(t){this._updateView=t}};var b=class extends m{constructor(t,i,r,s){super(t,i);this._type=g,this._attributes=this._attributes||{},this._attributes.height=r,this._attributes.width=s}set height(t){this._attributes.height=t}set width(t){this._attributes.width=t}get height(){return this._attributes.height}get width(){return this._attributes.width}toObject(){return{type:this._type,uuid:this.uuid,attributes:this.attributes}}clone(){return new b(this._attributes.x,this._attributes.y,this._attributes.height,this._attributes.width)}};export{V as Draw,b as Rectangle};
//# sourceMappingURL=drawjs.min.js.map
