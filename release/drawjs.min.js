
// Grafix 0.0.1
// MIT
// https://github.com/thesabbir/drawjs

var _="rect",c="layer",r="http://www.w3.org/2000/svg";var h=class{constructor(t=""){this._name="",this._type=c,this._uuid=Math.random()*1e5,this._children=[],this._active=!1}set name(t){this._name=t}get name(){return this._name}set active(t){this._active=t}get active(){return this._active}get uuid(){return this._uuid}addChildren(t){this._children.push(t)}get children(){return this._children}childrenToObject(){return this._children.map(t=>t.toObject())}toObject(){return{type:this._type,uuid:this._uuid,name:this._name,children:this.childrenToObject()}}};var d=e=>document.createElementNS(null,e),p=(e,t)=>(Object.keys(t).map(i=>{let s=t[i];e.setAttributeNS(null,i,s)}),e),b=e=>e.map(t=>p(d(t.type),{...t.attributes,id:t.uuid}).outerHTML).join(""),y=e=>e.map(t=>{let i=b(t.children),s=p(d("g"),{id:t.uuid});return s.innerHTML=i,s.outerHTML}).join(""),w=e=>{let t=document.createElementNS(r,"svg");return t.setAttributeNS(r,"ns:xmlns",r),t.setAttribute("style","height:100%;width:100%"),t.innerHTML=y(e),t.outerHTML},l=e=>w(e);var x=class{constructor(t){this._state={},this._layers={},this._activeLayer=null,this._rootElm=t}get state(){return this._state}set state(t){this._state=t}get layers(){return Object.keys(this._layers).map(t=>this._layers[t])}get activeLayer(){return this._layers[this._activeLayer]}set activeLayer(t){this._activeLayer=t.uuid}addLayer(t=new h){this._layers[t.uuid]=t,this._activeLayer=t.uuid}draw(t){t.onViewUpdate(i=>{this.updateView()}),this.activeLayer.addChildren(t),this.updateView()}updateView(){this.makeView(),this._rootElm?this.renderDom():new Error("Root element not found")}makeView(){this._viewObject=this.layers.map(t=>t.toObject())}renderDom(){this._svg=l(this._viewObject),this._rootElm.innerHTML=this._svg}setup(){this.addLayer(new h("layer 1"))}};var a=class{constructor(t,i){this._attributes={x:t,y:i}}set x(t){this._attributes.x=t}set y(t){this._attributes.y=t}get x(){return this._attributes.x}get y(){return this._attributes.y}};var o=class extends a{constructor(t=0,i=0){super(t,i);return this._uuid=Math.random()*1e7,this._attributes=this.attributes||{},new Proxy(this,{set:(s,u,m)=>(s[u]=m,s._updateView&&s._updateView(s),!0)})}get attributes(){return this._attributes}set attributes(t){this._attributes={...this._attributes,...t}}set fill(t){this._attributes.fill=t}set stroke(t){this._attributes.stroke=t}set strokeWidth(t){this._attributes.strokeWidth=t}set transform(t){this._attributes.transform=t}get uuid(){return this._uuid}onViewUpdate(t){this._updateView=t}};var n=class extends o{constructor(t,i,s,u){super(t,i);this._type=_,this._attributes=this._attributes||{},this._attributes.height=s,this._attributes.width=u}set height(t){this._attributes._height=t}set width(t){this._attributes._width=t}get height(){return this._attributes._height}get width(){return this._attributes._width}toObject(){return{type:this._type,uuid:this.uuid,attributes:this.attributes}}clone(){return new n(this._attributes.x,this._attributes.y,this._attributes.height,this._attributes.width)}};export{x as Draw,n as Rectangle};
//# sourceMappingURL=drawjs.min.js.map
