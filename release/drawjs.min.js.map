{
  "version": 3,
  "sources": ["../src/constants.js", "../src/helpers.js", "../src/core/Layer.js", "../src/dom/createElement.js", "../src/dom/createSVG.js", "../src/dom/toSVG.js", "../src/core/DrawFile.js", "../src/core/Draw.js", "../src/objects/Point.js", "../src/objects/Shape.js", "../src/objects/Rectangle.js"],
  "sourcesContent": ["export const RECT_TYPE = `rect`;\nexport const LAYER_TYPE = `g`;\nexport const NAMESPACE = `http://www.w3.org/2000/svg`;\n", "export const genUUID = () => {\n  return ([1e4] + -1e4 + -1e4).replace(/[018]/g, (str) =>\n    (\n      str ^\n      (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (str / 4)))\n    ).toString(16)\n  );\n};\n\nexport const mapToArray = (object) => {\n  const items = [];\n  for (let i = 0, keys = Object.keys(object); i < keys.length; i++) {\n    items.push(object[keys[i]]);\n  }\n  return items;\n};\n\nexport const eachToObject = (items) => {\n  return items.map((item) => item.toObject());\n};\n", "import { LAYER_TYPE } from \"../constants\";\nimport { eachToObject, genUUID, mapToArray } from \"../helpers\";\n\nexport class Layer {\n  constructor(name = \"new layer\") {\n    this._name = name;\n    this._type = LAYER_TYPE;\n    this._uuid = genUUID();\n    this._children = {};\n    this._activeChildren = null;\n    this._active = false;\n    this._attributes = {};\n  }\n\n  set name(name) {\n    this._name = name;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  set active(active) {\n    this._active = active;\n  }\n\n  get active() {\n    return this._active;\n  }\n\n  get attributes() {\n    return this._attributes;\n  }\n\n  set attributes(attributes) {\n    this._attributes = {\n      ...this._attributes,\n      ...attributes,\n    };\n  }\n\n  get uuid() {\n    return this._uuid;\n  }\n\n  addChildren(children) {\n    this._children[children.uuid] = children;\n    this.activeChildren = children;\n  }\n\n  set activeChildren(children) {\n    this._activeChildren = children.uuid;\n  }\n\n  get activeChildren() {\n    return this._children[this._activeChildren];\n  }\n\n  get children() {\n    return mapToArray(this._children);\n  }\n\n  toObject() {\n    return {\n      type: this._type,\n      uuid: this._uuid,\n      name: this._name,\n      children: eachToObject(this.children),\n    };\n  }\n}\n", "import { NAMESPACE } from \"../constants\";\n\nexport default function createElement(type) {\n  return document.createElementNS(NAMESPACE, type);\n}\n", "import { NAMESPACE } from \"../constants\";\nimport { setAttributes } from \"./toSVG\";\n\nexport default function createSVG(attributes = {}) {\n  const svg = document.createElementNS(NAMESPACE, \"svg\");\n  svg.setAttribute(\"xmlns\", NAMESPACE);\n  setAttributes(svg, attributes);\n  return svg;\n}\n", "import createElement from \"./createElement\";\nimport createSVG from \"./createSVG\";\n\nexport const setAttributes = (element, attributes) => {\n  for (let i = 0, keys = Object.keys(attributes); i < keys.length; i++) {\n    let value = attributes[keys[i]];\n    element.setAttributeNS(null, keys[i], value);\n  }\n  return element;\n};\n\nexport const objectToNode = (children) => {\n  const childNodes = new DocumentFragment();\n  for (let i = 0; i < children.length; i++) {\n    const node = children[i];\n    childNodes.appendChild(\n      setAttributes(createElement(node.type), {\n        ...node.attributes,\n        id: node.uuid,\n      })\n    );\n  }\n  return childNodes;\n};\n\nexport const objectToGroup = (layer) =>\n  setAttributes(createElement(layer.type), {\n    ...layer.attributes,\n    id: layer.uuid,\n  });\n\nexport const layerToSVG = (layers) => {\n  const layerNodes = new DocumentFragment();\n  for (let i = 0; i < layers.length; i++) {\n    const layer = layers[i];\n    const group = objectToGroup(layer);\n    group.appendChild(objectToNode(layer.children));\n    layerNodes.appendChild(group);\n  }\n  return layerNodes;\n};\n\nexport const documentToSVG = (viewObject) => {\n  const svg = createSVG({ id: viewObject.uuid });\n  svg.appendChild(layerToSVG(viewObject.layers));\n  return svg;\n};\n\nexport const toSVGView = (viewObject) => {\n  return documentToSVG(viewObject);\n};\n", "import { Layer } from \"./Layer\";\nimport { toSVGView } from \"../dom/toSVG\";\nimport { eachToObject, genUUID, mapToArray } from \"../helpers\";\n\nexport class DrawFile {\n  constructor(name = \"Untitled.svg\") {\n    this._name = name;\n    this._state = {};\n    this._layers = {};\n    this._activeLayer = null;\n    this._uuid = genUUID();\n    this.setup();\n  }\n\n  get state() {\n    return this._state;\n  }\n\n  set state(data) {\n    this._state = data;\n  }\n\n  get name() {\n    return this._name;\n  }\n\n  set name(name) {\n    this._name = name;\n  }\n  get uuid() {\n    return this._uuid;\n  }\n\n  get layers() {\n    return mapToArray(this._layers);\n  }\n\n  get activeLayer() {\n    return this._layers[this._activeLayer];\n  }\n\n  set activeLayer(layer) {\n    this._activeLayer = layer.uuid;\n  }\n\n  addLayer(layer = new Layer()) {\n    this._layers[layer.uuid] = layer;\n    this.activeLayer = layer;\n  }\n\n  draw(shape, requestRender) {\n    this.activeLayer.addChildren(shape);\n    shape.onViewUpdate(() => {\n      requestRender(this.toSVG());\n    });\n  }\n\n  toObject() {\n    return {\n      name: this.name,\n      uuid: this.uuid,\n      layers: eachToObject(this.layers),\n    };\n  }\n\n  toSVG() {\n    const svg = toSVGView(this.toObject());\n    svg.setAttribute(\"style\", `height:100%;width:100%`);\n    return svg;\n  }\n\n  setup() {\n    this.addLayer(new Layer(\"layer 1\"));\n  }\n}\n", "import { DrawFile } from \"./DrawFile\";\nimport { mapToArray } from \"../helpers\";\n\nexport class Draw {\n  constructor(rootElm) {\n    this._rootElm = rootElm;\n    this._files = {};\n    this._activeFile = {};\n  }\n\n  get files() {\n    return mapToArray(this._files);\n  }\n\n  newFile(name) {\n    const file = new DrawFile(name);\n    this._files[file.uuid] = file;\n    this._activeFile = file.uuid;\n    return file;\n  }\n\n  get activeFile() {\n    return this._files[this._activeFile];\n  }\n\n  set activeFile(file) {\n    return this._files[file.uuid];\n  }\n\n  draw(shape) {\n    this.activeFile.draw(shape, this._renderDom.bind(this));\n    this._renderDom();\n  }\n\n  _renderDom(content = this.activeFile.toSVG()) {\n    if (!this._rootElm) {\n      return new Error(\"Root element not found\");\n    }\n    this._rootElm.replaceChildren(content);\n  }\n\n  setup() {\n    this.newFile();\n    this._renderDom();\n  }\n}\n", "export class Point {\n  constructor(x, y) {\n    this._attributes = {\n      x: x,\n      y: y,\n    };\n  }\n\n  set x(x) {\n    this._attributes.x = x;\n  }\n  set y(y) {\n    this._attributes.y = y;\n  }\n  get x() {\n    return this._attributes.x;\n  }\n  get y() {\n    return this._attributes.y;\n  }\n}\n", "import { Point } from \"./Point\";\nimport { genUUID } from \"../helpers\";\n\nexport class Shape extends Point {\n  constructor(x = 0, y = 0) {\n    super(x, y);\n\n    this._uuid = genUUID();\n    this._attributes = this.attributes || {};\n\n    return new Proxy(this, {\n      set: (target, key, value) => {\n        target[key] = value;\n        if (target._updateView) target._updateView(target);\n        return true;\n      },\n    });\n  }\n\n  get attributes() {\n    return this._attributes;\n  }\n\n  set attributes(attributesObject) {\n    this._attributes = {\n      ...this._attributes,\n      ...attributesObject,\n    };\n  }\n\n  set fill(color) {\n    this._attributes.fill = color;\n  }\n\n  set stroke(color) {\n    this._attributes.stroke = color;\n  }\n\n  set strokeWidth(width) {\n    this._attributes.strokeWidth = width;\n  }\n\n  set transform(properties) {\n    this._attributes.transform = properties;\n  }\n\n  get uuid() {\n    return this._uuid;\n  }\n\n  onViewUpdate(f) {\n    this._updateView = f;\n  }\n}\n", "import { Shape } from \"./Shape\";\nimport { RECT_TYPE } from \"../constants\";\n\nexport class Rectangle extends Shape {\n  constructor(x, y, height, width) {\n    super(x, y);\n    this._type = RECT_TYPE;\n    this._attributes = this._attributes || {};\n    this._attributes.height = height;\n    this._attributes.width = width;\n  }\n\n  set height(height) {\n    this._attributes.height = height;\n  }\n\n  set width(width) {\n    this._attributes.width = width;\n  }\n\n  get height() {\n    return this._attributes.height;\n  }\n  get width() {\n    return this._attributes.width;\n  }\n\n  toObject() {\n    return {\n      type: this._type,\n      uuid: this.uuid,\n      attributes: this.attributes,\n    };\n  }\n\n  clone() {\n    return new Rectangle(\n      this._attributes.x,\n      this._attributes.y,\n      this._attributes.height,\n      this._attributes.width\n    );\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
